<head><title></title>
<META NAME="AUTHOR" CONTENT="Main.LachlanMusicman"/><META NAME="COPYRIGHT" CONTENT=""/><META NAME="DOCNUMBER" CONTENT="r1.6 - 20 Jan 2010"/><META NAME="GENERATOR" CONTENT="TWiki TWiki-4.2.0, Tue, 22 Jan 2008, build 16278"/><META NAME="KEYWORDS" CONTENT=""/><META NAME="SUBJECT" CONTENT=""/></head>
<body><a name="GoingInternationalWithPootle"> </a><html>
	<head>
		<title>ActivitiesGuideSugar</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<link rel="icon" href="TWiki/FlossSkin2/fl2.ico" type="image/x-icon" /> <link rel="shortcut icon" href="TWiki/FlossSkin2/fl2.ico" type="image/x-icon" />
		<link  rel="StyleSheet" href="style.css" type="text/css" media="screen"//>
		<style id="mystyle" class="mystyle"></style>
	</head>
<body >
<p />
	<div id="index">
	<div class="topics">
	<ul><li><a href="ActivitiesGuideSugar__Introduction.html">INTRODUCTION</a></li><li><a href="ActivitiesGuideSugar__WhatIsSugar.html">WHAT IS SUGAR?</a></li><li><a href="ActivitiesGuideSugar__WhatisanActivity.html">WHAT IS A SUGAR ACTIVITY?</a></li><li><a href="ActivitiesGuideSugar__NeedtoKnowWriteSugarActivity.html">WHAT DO I NEED TO KNOW TO WRITE A SUGAR ACTIVITY?</a></li><li><a href="ActivitiesGuideSugar__SetUpDevEnvironment.html">SETTING UP A DEVELOPMENT ENVIRONMENT</a></li><li><a href="ActivitiesGuideSugar__CreateFirstActivity.html">CREATING YOUR FIRST ACTIVITY</a></li><li><a href="ActivitiesGuideSugar__StandalonePythonReadEtexts.html">A STANDALONE PYTHON PROGRAM FOR READING ETEXTS</a></li><li><a href="ActivitiesGuideSugar__InheritFromActivity.html">INHERIT FROM SUGAR.ACTIVITY.ACTIVITY</a></li><li><a href="ActivitiesGuideSugar__PackageTheActivity.html">PACKAGE THE ACTIVITY</a></li><li><a href="ActivitiesGuideSugar__AddRefinements.html">ADD REFINEMENTS</a></li><li><a href="ActivitiesGuideSugar__UsingVersionControl.html">ADD YOUR ACTIVITY CODE TO VERSION CONTROL</a></li><li><a href="ActivitiesGuideSugar__GoingInternationalWithPootle.html">GOING INTERNATIONAL WITH POOTLE</a></li><li><a href="ActivitiesGuideSugar__DistributeYourActivity.html">DISTRIBUTE YOUR ACTIVITY</a></li><li><a href="ActivitiesGuideSugar__SugarDebugging.html">DEBUGGING SUGAR ACTIVITIES</a></li><li><a href="ActivitiesGuideSugar__SugarCollaboration.html">MAKING SHARED ACTIVITIES</a></li><li><a href="ActivitiesGuideSugar__TextToSpeech.html">ADDING TEXT TO SPEECH</a></li><li><a href="ActivitiesGuideSugar__ActivitiesUsingPyGame.html">MAKING ACTIVITIES USING PYGAME</a></li><li><a href="ActivitiesGuideSugar__NewStyleToolbars.html">MAKING NEW STYLE TOOLBARS</a></li><li><a href="ActivitiesGuideSugar__MoreReading.html">WHERE TO GO FROM HERE?</a></li><li><a href="ActivitiesGuideSugar__AboutTheAuthors.html">ABOUT THE AUTHORS</a></li><li><a href="ActivitiesGuideSugar__Credits.html">CREDITS</a></li><li><a href="Main__Credits.html">CREDITS</a></li></ul>
	</div>
</div>	
	<div id="content">
			
<h1>Going International With Pootle
</h1>
<h2>Introduction
  <br />
</h2>
<p>The goal of Sugar Labs and One Laptop Per Child is to educate all the children of the world, and we can't do that with Activities that are only available in one language.&nbsp; It is equally true that making separate versions of each Activity for every language is not going to work, and expecting Activity developers to be fluent in many languages is not realistic either.&nbsp; We need a way for Activity developers to be able to concentrate on creating Activities and for those who can translate to just do that.&nbsp; Fortunately, this is possible and the way it's done is by using <em>gettext</em>.
</p>
<h2>Getting Text With gettext
</h2>
<p>You should remember that our latest code example made use of an odd import:
</p>
<pre>from gettext import gettext as _
</pre>
<p> The "_()" function was used in statements like this:
</p>
<pre>        self.back.set_tooltip(_('Back'))
</pre>
<p> At the time I explained that this odd looking function was used to translate the word "Back" into other languages, so that when someone looks at the Back button's tool tip he'll see the text in his own language.&nbsp; I also said that if it was not possible to translate this text the user would see the word "Back" untranslated.&nbsp; In this chapter we'll learn more about how this works and what we have to do to support the volunteers who translate these text strings into other languages.
</p>
<h2>Going To Pot
</h2>
<p>Assuming that every string of text a user might be shown by our Activity is passed through "_()" the next step is to generate a pot file.&nbsp; You can do this by running setup.py with a special option:
</p>
<pre>./setup.py genpot</pre>
<p>This creates a directory called <strong>po</strong> and puts a file <strong><em>ActivityName</em>.pot</strong> in that directory.&nbsp; In the case of our example project <em>ActivityName</em> is <strong>ReadEtextsII</strong>.&nbsp; This is the contents of that file:
</p>
<pre># SOME DESCRIPTIVE TITLE.
# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR &lt;EMAIL@ADDRESS&gt;, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2010-01-06 18:31-0600\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME &lt;EMAIL@ADDRESS&gt;\n"
"Language-Team: LANGUAGE &lt;LL@li.org&gt;\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=CHARSET\n"
"Content-Transfer-Encoding: 8bit\n"

#: activity/activity.info:2
msgid "Read ETexts II"
msgstr ""

#: toolbar.py:34
msgid "Back"
msgstr ""

#: toolbar.py:40
msgid "Forward"
msgstr ""

#: toolbar.py:115
msgid "Zoom out"
msgstr ""

#: toolbar.py:120
msgid "Zoom in"
msgstr ""

#: toolbar.py:130
msgid "Fullscreen"
msgstr ""

#: ReadEtextsActivity2.py:34
msgid "Edit"
msgstr ""

#: ReadEtextsActivity2.py:38
msgid "Read"
msgstr ""

#: ReadEtextsActivity2.py:46
msgid "View"
msgstr ""
</pre>
<p> This file contains an entry for every text string in our Activity (as msgid) and a place to put a translation of that string (msgstr).&nbsp;&nbsp; Copies of this file will be made by the Pootle server for every language desired, and the msgstr entries will be filled in by volunteer translators.
</p>
<h2>Going To Pootle
  <br />
</h2>
<p>Before any of that can happen we need to get our POT file into Pootle.&nbsp; The first thing we need to do is get the new directory into our Git repository and push it out to Gitorious.&nbsp; You should be familiar with the needed commands by now:
</p>
<pre>git add po
git commit -a -m "Add POT file"
git push
</pre>
<p>Next we need to give the user "pootle" commit authority to our Git project.&nbsp; Go to <a href="http://git.sugarlabs.org">git.sugarlabs.org,</a>&nbsp; sign in, and find your Project page and click on the mainline link.&nbsp; You should see this on the page that takes you to:
</p>
<p>&nbsp;<img alt="Add pootle as a committer" src="ActivitiesGuideSugar/pootle1.jpg" height="456" width="376" />
</p>
<p>Click on the <strong>Add committer</strong> link and type in the name <strong>pootle </strong>in the form that takes you to.&nbsp; When you come back to this page <strong>pootle</strong> will be listed under Committers.
  <br />
</p>
<p> Your next step is to go to web site <a href="http://bugs.sugarlabs.org">http://bugs.sugarlabs.org</a>&nbsp; and register for a user id.&nbsp; When you get that open up a ticket something like this:
</p>
<p><img alt="pootle2.jpg" src="ActivitiesGuideSugar/pootle2.jpg" height="527" width="640" />
</p>
<p>The <strong>Component</strong> entry <em>localization</em> should be used, along with <strong>Type</strong> <em>task</em>.
</p>
<p>Believe it or not, this is all you need to do to get your Activity set up to be translated.
</p>
<h2>Pay No Attention To That Man Behind The Curtain
</h2>
<p>After this you'll need to do a few things to get translations from Pootle into your Activity.
</p>
<ul>
  <li>When you add text strings (labels, error messages, etc.) to your Activity always use the <strong>_()</strong> function with them so they can be translated.</li>
  <li>After adding new strings always run <strong>./setup.py genpot</strong> to recreate the POT file.</li>
  <li>After that commit and push your changes to Gitorious.</li>
  <li>Every so often, and especially before releasing a new version, do a <strong>git pull</strong>.&nbsp; If there are any localization files added to Gitorious this will bring them to you.</li>
  <li>After getting a bunch of new files run <strong>./setup.py fix_manifest</strong> to get the new files included in your <strong>MANIFEST</strong> file.&nbsp; Afterwards edit the <strong>MANIFEST</strong> with gedit to remove any unwanted entries (which will be Eric project files, etc.).
  <br /></li>
</ul>
<p>Localization with Pootle will create a large number of files in your project, some in the <strong>po</strong> directory and others in a new directory called <strong>locale</strong>.&nbsp; As long as these are listed in the MANIFEST they will be included in the .xo file that you will use to distribute your Activity.
</p>
<h2>C'est Magnifique!
</h2>
<p>Here is a screen shot of the French language version of <strong>Read Etexts</strong> reading Jules Verne's novel <em>Le tour du monde en quatre-vingts jours</em>:
</p>
<p><img alt="Jules Verne in French" src="ActivitiesGuideSugar/pootle3.jpg" height="480" width="640" />&nbsp;
</p>
<p>There is reason to believe that the book is in French too.
  <br />
</p>
<p />


<p />
			<p>
Author : <i>GoingInternationalWithPootle</i> <br/>&copy; James  Simmons 2010<br/>Modifications:<br/>Lachlan  Musicman 2010<br/><hr/><br>License : General Public License
</p>
<p>Produced in FLOSS Manuals (<a href='http://www.flossmanuals.net'>http://www.flossmanuals.net</a>)
</p>
</div>
</body>
</html></body>